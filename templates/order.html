{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
                <div class="card-header bg-primary text-white p-4 text-center">
                    <h2 class="fw-bold mb-1">Formulir Pemesanan</h2>
                    <p class="mb-0 text-white-50">Isi data di bawah, pesanan akan langsung terhubung ke WhatsApp Admin.</p>
                </div>
                <div class="card-body p-5">

                    <form action="/order" method="POST">
                        
                        <h5 class="text-primary fw-bold mb-3">1. Data Pemesan</h5>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label fw-bold small">Nama Lengkap</label>
                                <input type="text" name="nama" class="form-control" placeholder="Nama Anda" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold small">Nomor WhatsApp</label>
                                <input type="number" name="whatsapp" class="form-control" placeholder="08..." required>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold small text-primary">Design Referensi Pilihan</label>
                            <input type="text" name="design_ref" class="form-control bg-light fw-bold text-dark" 
                                   value="{{ referensi if referensi else 'Belum memilih (Konsultasi via WA)' }}" 
                                   readonly>
                            <div class="form-text small">Design ini akan menjadi acuan pengerjaan kami.</div>
                        </div>

                        <h5 class="text-primary fw-bold mb-3">2. Detail Kebutuhan</h5>
                        <div class="mb-3">
                            <label class="form-label fw-bold small">Pilih Jasa</label>
                            <select name="service" id="jenisLayanan" class="form-select" onchange="toggleForm()" required>
                                <option value="" disabled selected>-- Pilih Layanan --</option>
                                <option value="website">Jasa Pembuatan Website</option>
                                <option value="cv">Jasa Pembuatan CV / Lamaran</option>
                            </select>
                        </div>

                        <div id="form-website" class="bg-light p-3 rounded-3 mb-3 border d-none">
                            <h6 class="fw-bold text-dark mb-3">üåê Data Website</h6>
                            <div class="mb-2">
                                <label class="form-label small text-muted">Nama Bisnis / Toko</label>
                                <input type="text" name="web_bisnis" class="form-control" placeholder="Cth: Kopi Senja Abadi">
                            </div>
                            <div class="mb-2">
                                <label class="form-label small text-muted">Rencana Nama Domain</label>
                                <input type="text" name="web_domain" class="form-control" placeholder="Cth: kopisenja.com">
                            </div>
                            <div class="mb-2">
                                <label class="form-label small text-muted">Warna Dominan</label>
                                <input type="text" name="web_warna" class="form-control" placeholder="Cth: Coklat & Hitam">
                            </div>
                        </div>

                        <div id="form-cv" class="bg-light p-3 rounded-3 mb-3 border d-none">
                            <h6 class="fw-bold text-dark mb-3">üìÑ Data CV / Lamaran</h6>
                            <div class="mb-2">
                                <label class="form-label small text-muted">Posisi yang Dilamar</label>
                                <input type="text" name="cv_posisi" class="form-control" placeholder="Cth: Admin Staff">
                            </div>
                            <div class="mb-2">
                                <label class="form-label small text-muted">Pendidikan Terakhir</label>
                                <input type="text" name="cv_pendidikan" class="form-control" placeholder="Cth: S1 Manajemen (2020)">
                            </div>
                            <div class="mb-2">
                                <label class="form-label small text-muted">Pengalaman Kerja (Singkat)</label>
                                <textarea name="cv_pengalaman" class="form-control" rows="2" placeholder="Cth: Kasir di Indomaret (1 Tahun)"></textarea>
                            </div>
                            <div class="mb-2">
                                <label class="form-label small text-muted">Skill Utama</label>
                                <input type="text" name="cv_skill" class="form-control" placeholder="Cth: Ms. Office, Bahasa Inggris">
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold small">Catatan Tambahan (Opsional)</label>
                            <textarea name="keterangan" class="form-control" rows="3" placeholder="Pesan khusus untuk admin..."></textarea>
                        </div>

                        <button type="submit" class="btn btn-orange w-100 py-3 fw-bold shadow-sm rounded-pill">
                            Kirim Pesanan via WhatsApp ‚ûú
                        </button>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function toggleForm() {
        var layanan = document.getElementById("jenisLayanan").value;
        var formWeb = document.getElementById("form-website");
        var formCv = document.getElementById("form-cv");

        // Sembunyikan semua
        formWeb.classList.add("d-none");
        formCv.classList.add("d-none");

        // Tampilkan yang dipilih
        if (layanan === "website") {
            formWeb.classList.remove("d-none");
        } else if (layanan === "cv") {
            formCv.classList.remove("d-none");
        }
    }
</script>
{% endblock %}